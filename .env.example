# ============================================================================
# MSSU-Connect Backend - Environment Configuration
# ============================================================================
# This file contains all environment variables required for the application.
# Copy this file to .env and update the values for your environment.
# 
# SECURITY WARNING: Never commit the .env file to version control!
# ============================================================================

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
# NODE_ENV: Application environment (development, staging, production)
NODE_ENV=development

# PORT: Port number for the Express server
PORT=3000

# API_VERSION: API version prefix (e.g., /api/v1)
API_VERSION=v1

# ============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# ============================================================================
# Option 1: Use DATABASE_URL (recommended for cloud providers like Neon, Supabase)
# Format: postgresql://username:password@host:5432/database?sslmode=require
DATABASE_URL=postgresql://username:password@host:5432/database?sslmode=require

# Option 2: Use individual parameters (comment out DATABASE_URL if using this)
# DB_HOST: PostgreSQL server hostname
# DB_HOST=localhost

# DB_PORT: PostgreSQL server port (default: 5432)
# DB_PORT=5432

# DB_NAME: Database name (environment-specific recommended)
# DB_NAME=mssu_connect_dev

# DB_USER: Database username
# DB_USER=postgres

# DB_PASSWORD: Database password (REQUIRED in production)
# DB_PASSWORD=your_secure_database_password

# Connection Pooling Settings
# DB_POOL_MIN: Minimum number of connections in pool
DB_POOL_MIN=10

# DB_POOL_MAX: Maximum number of connections in pool
DB_POOL_MAX=100

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
# REDIS_HOST: Redis server hostname
REDIS_HOST=localhost

# REDIS_PORT: Redis server port (default: 6379)
REDIS_PORT=6379

# REDIS_PASSWORD: Redis password (leave empty if no password)
REDIS_PASSWORD=

# REDIS_DB: Redis database number (0-15)
REDIS_DB=0

# REDIS_TLS: Enable TLS for Redis connection (true/false)
# Set to true for production environments
REDIS_TLS=false

# ============================================================================
# JWT (JSON Web Token) CONFIGURATION
# ============================================================================
# JWT_SECRET: Secret key for signing JWT tokens
# CRITICAL: Must be a long, random string in production (min 32 characters)
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-secret-key-change-in-production-use-long-random-string

# JWT_ACCESS_EXPIRY: Access token expiration time (e.g., 1h, 15m, 2d)
JWT_ACCESS_EXPIRY=1h

# JWT_REFRESH_EXPIRY: Refresh token expiration time (e.g., 7d, 30d)
JWT_REFRESH_EXPIRY=7d

# JWT_ALGORITHM: Signing algorithm (HS256, HS384, HS512, RS256)
# HS256: HMAC with SHA-256 (symmetric, simpler)
# RS256: RSA with SHA-256 (asymmetric, more secure for distributed systems)
JWT_ALGORITHM=HS256

# JWT_ISSUER: Token issuer identifier (your application name)
JWT_ISSUER=mssu-connect

# JWT_AUDIENCE: Token audience (who the token is intended for)
JWT_AUDIENCE=mssu-connect-api

# ============================================================================
# ENCRYPTION CONFIGURATION
# ============================================================================
# ENCRYPTION_KEY: 32-byte key for AES-256 encryption of PII data
# CRITICAL: Must be exactly 32 characters for AES-256
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=change-this-32-byte-key-in-production-env

# ENCRYPTION_ALGORITHM: Encryption algorithm (aes-256-cbc recommended)
ENCRYPTION_ALGORITHM=aes-256-cbc

# ============================================================================
# SMS GATEWAY CONFIGURATION
# ============================================================================
# SMS_PROVIDER: SMS service provider (twilio, msg91)
SMS_PROVIDER=twilio

# Twilio Configuration (if using Twilio)
# SMS_API_KEY: Twilio Account SID
SMS_API_KEY=your_twilio_account_sid

# SMS_API_SECRET: Twilio Auth Token
SMS_API_SECRET=your_twilio_auth_token

# SMS_FROM_NUMBER: Twilio phone number (with country code)
SMS_FROM_NUMBER=+919876543210

# MSG91 Configuration (if using MSG91)
# SMS_API_KEY: MSG91 Auth Key
# SMS_API_KEY=your_msg91_auth_key

# SMS_API_SECRET: MSG91 Sender ID
# SMS_API_SECRET=your_msg91_sender_id

# ============================================================================
# EMAIL SERVICE CONFIGURATION
# ============================================================================
# EMAIL_PROVIDER: Email service provider (ses, sendgrid)
EMAIL_PROVIDER=ses

# EMAIL_FROM: Sender email address (must be verified in SES)
EMAIL_FROM=noreply@mssu.ac.in

# EMAIL_REPLY_TO: Reply-to email address
EMAIL_REPLY_TO=support@mssu.ac.in

# AWS SES Configuration (if using AWS SES)
# EMAIL_REGION: AWS region for SES (e.g., ap-south-1, us-east-1)
EMAIL_REGION=ap-south-1

# AWS_ACCESS_KEY_ID: AWS access key for SES
AWS_ACCESS_KEY_ID=your_aws_access_key_id

# AWS_SECRET_ACCESS_KEY: AWS secret key for SES
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key

# SendGrid Configuration (if using SendGrid)
# SENDGRID_API_KEY: SendGrid API key
# SENDGRID_API_KEY=your_sendgrid_api_key

# ============================================================================
# STORAGE CONFIGURATION (AWS S3)
# ============================================================================
# S3_BUCKET: S3 bucket name for file uploads
S3_BUCKET=mssu-connect-uploads

# S3_REGION: AWS region for S3 bucket
S3_REGION=ap-south-1

# S3_ACCESS_KEY_ID: AWS access key for S3 (can use same as SES)
S3_ACCESS_KEY_ID=your_s3_access_key_id

# S3_SECRET_ACCESS_KEY: AWS secret key for S3 (can use same as SES)
S3_SECRET_ACCESS_KEY=your_s3_secret_access_key

# ============================================================================
# RATE LIMITING CONFIGURATION
# ============================================================================
# RATE_LIMIT_WINDOW: Time window for rate limiting (in milliseconds)
# Default: 60000 (1 minute)
RATE_LIMIT_WINDOW=60000

# RATE_LIMIT_MAX_REQUESTS: Maximum requests per window for general API
RATE_LIMIT_MAX_REQUESTS=100

# AUTH_RATE_LIMIT_MAX: Maximum authentication requests per window
AUTH_RATE_LIMIT_MAX=10

# OTP_RATE_LIMIT_MAX: Maximum OTP requests per hour per phone number
OTP_RATE_LIMIT_MAX=3

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
# BCRYPT_SALT_ROUNDS: Number of salt rounds for bcrypt hashing
# Higher = more secure but slower (10-12 recommended)
BCRYPT_SALT_ROUNDS=10

# ACCOUNT_LOCK_DURATION: Account lock duration after failed attempts (in milliseconds)
# Default: 1800000 (30 minutes)
ACCOUNT_LOCK_DURATION=1800000

# MAX_FAILED_ATTEMPTS: Maximum failed login attempts before account lock
MAX_FAILED_ATTEMPTS=5

# PASSWORD_RESET_EXPIRY: Password reset token expiry time (in milliseconds)
# Default: 3600000 (1 hour)
PASSWORD_RESET_EXPIRY=3600000

# OTP_EXPIRY: OTP expiry time (in milliseconds)
# Default: 300000 (5 minutes)
OTP_EXPIRY=300000

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
# CORS_ORIGIN: Allowed origins for CORS (comma-separated)
# Add your frontend URLs here
CORS_ORIGIN=http://localhost:3000,http://localhost:3001

# CORS_CREDENTIALS: Allow credentials in CORS requests (true/false)
CORS_CREDENTIALS=true

# ============================================================================
# FRONTEND CONFIGURATION
# ============================================================================
# FRONTEND_URL: Frontend application URL (for email links)
FRONTEND_URL=http://localhost:3000

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
# LOG_LEVEL: Logging level (error, warn, info, debug)
# Automatically set based on NODE_ENV if not specified:
# - development: debug
# - staging: info
# - production: warn
LOG_LEVEL=info

# LOG_FILE: Log file path (leave empty to disable file logging)
# Only used in staging environment
LOG_FILE=logs/app.log

# AWS CloudWatch Logs Configuration (for production)
# AWS_CLOUDWATCH_GROUP: CloudWatch log group name
AWS_CLOUDWATCH_GROUP=mssu-connect-auth

# AWS_CLOUDWATCH_STREAM: CloudWatch log stream prefix
AWS_CLOUDWATCH_STREAM=auth-service

# AWS_REGION: AWS region for CloudWatch (same as other AWS services)
# AWS_REGION=ap-south-1

# ============================================================================
# ERROR MONITORING CONFIGURATION (Sentry)
# ============================================================================
# SENTRY_DSN: Sentry DSN for error tracking and monitoring
# Get this from your Sentry project settings
# Leave empty to disable Sentry integration
SENTRY_DSN=

# SENTRY_ENVIRONMENT: Sentry environment name (should match NODE_ENV)
SENTRY_ENVIRONMENT=development

# SENTRY_RELEASE: Release version for tracking (optional)
# Format: project-name@version (e.g., mssu-connect-auth@1.0.0)
SENTRY_RELEASE=mssu-connect-auth@1.0.0

# SERVER_NAME: Server/instance name for identification in logs
SERVER_NAME=auth-service-1

# SENTRY_TRACES_SAMPLE_RATE: Percentage of transactions to trace (0.0 to 1.0)
# Lower values reduce overhead in production (e.g., 0.1 = 10%)
SENTRY_TRACES_SAMPLE_RATE=1.0

# SENTRY_PROFILES_SAMPLE_RATE: Percentage of transactions to profile (0.0 to 1.0)
SENTRY_PROFILES_SAMPLE_RATE=1.0

# ============================================================================
# NOTES
# ============================================================================
# 1. Generate secure random keys using:
#    node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# 2. For production, ensure all secrets are properly set and secured
#
# 3. Use environment-specific .env files:
#    - .env.development
#    - .env.staging
#    - .env.production
#
# 4. Never commit .env files to version control
#
# 5. Rotate secrets regularly (every 90 days recommended)
# ============================================================================
